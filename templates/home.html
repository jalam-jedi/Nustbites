{% extends "basic.html" %} {% block style %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/styles.css') }}"
/>
{% endblock %} {% block content %}

<h1
  class="text-3xl font-bold mt-16 mb-2"
  style="color: #222; text-align: left; margin-left: 2.5rem"
>
  Our Restaurants
</h1>
<div
  class="mb-10"
  style="
    height: 6px;
    width: 180px;
    background: #111;
    border-radius: 3px;
    margin-left: 2.5rem;
  "
></div>

<div
  id="restaurants-container"
  class="flex flex-wrap gap-8 justify-start ml-10"
>
  <!-- Restaurants will be loaded dynamically here -->
</div>

{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch("/api/restaurants")
      .then((response) => response.json())
      .then((data) => {
        const container = document.getElementById("restaurants-container");

        data.forEach((restaurant) => {
          const logoPath = `/static/images/${restaurant.name.toLowerCase()}/home_logo.svg`;
          const restaurantCard = document.createElement("div");
          restaurantCard.className =
            "flex flex-col items-center cursor-pointer";
          restaurantCard.style.width = "300px";
          restaurantCard.style.height = "180px";
          restaurantCard.innerHTML = `
                    <img src="${logoPath}" alt="${restaurant.name}" class="w-full h-full object-contain rounded-lg" style="background: #fff; border: 2px solid #eee;" onerror="this.onerror=null;this.src='https://via.placeholder.com/300x180?text=No+Logo'">
                `;
          restaurantCard.onclick = () => goToMenu(restaurant.id);
          container.appendChild(restaurantCard);
        });
      })
      .catch((error) => console.error("Error fetching restaurants:", error));
  });

  function goToMenu(restaurantId) {
    window.location.href = `/menu/${restaurantId}`;
  }
</script>
{% endblock %}
