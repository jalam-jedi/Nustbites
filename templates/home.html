{% extends "basic.html" %}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
{% endblock %}

{% block content %}

<div class="flex justify-center mt-24 bg-white">
  <div class="bg-gray-200/30 backdrop-blur-md border border-gray-300 p-8 rounded-2xl shadow-xl text-center max-w-lg w-full">
    <h1 class="text-4xl font-bold text-gray-800 mb-2">Welcome to Nustbites</h1>
    <p class="text-lg text-gray-700">Serving your Cravings</p>
  </div>
</div>

<h1 class="text-3xl font-bold text-center my-10">Our Restaurants</h1>

<div id="restaurants-container" class="flex flex-wrap justify-center gap-6">
  <!-- Restaurants will be loaded dynamically here -->
</div>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    fetch('/api/restaurants')
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('restaurants-container');

            data.forEach(restaurant => {
                const restaurantCard = document.createElement('div');
                restaurantCard.className = 'card w-60 bg-base-100 shadow-xl';

                restaurantCard.innerHTML = `
                    <figure class="p-4">
                        <img src="${restaurant.image_url || 'https://via.placeholder.com/150'}" alt="${restaurant.name}" class="w-full h-40 object-cover rounded-lg">
                    </figure>
                    <div class="card-body text-center">
                        <h3 class="text-xl font-semibold">${restaurant.name}</h3>
                        <button onclick="goToMenu(${restaurant.id})" class="btn btn-primary mt-4 w-full">View Menu</button>
                    </div>
                `;

                container.appendChild(restaurantCard);
            });
        })
        .catch(error => console.error('Error fetching restaurants:', error));
});

function goToMenu(restaurantId) {
    window.location.href = `/menu/${restaurantId}`;
}
</script>
{% endblock %}
